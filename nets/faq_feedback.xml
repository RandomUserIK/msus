<?xml version="1.0" encoding="UTF-8"?>
<document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://modeler.netgrif.com/petriflow_schema.xsd">
	<id>faq_feedback</id>
	<initials>FQF</initials>
	<title>FAQ Feedback Form</title>
	<defaultRole>true</defaultRole>
	<transitionRole>false</transitionRole>

	<!-- ROLES -->
	<role>
		<id>admin</id>
		<title>Admin</title>
	</role>
	<role>
		<id>client</id>
		<title>Klient</title>
	</role>

	<!-- DATA -->
	<data type="enumeration">
		<id>question_severity</id>
		<title>Závažnosť Vašej otázky</title>
		<values>vysoká</values>
		<values>nízka</values>
		<init>nízka</init>
	</data>
	<data type="text">
		<id>client_name</id>
		<title>Meno</title>
	</data>
	<data type="text">
		<id>client_surname</id>
		<title>Priezvisko</title>
	</data>
	<data type="text">
		<id>client_email</id>
		<title>E-mail</title>
		<valid>email</valid>
	</data>
	<data type="text">
		<id>question</id>
		<title>Otázka</title>
		<length>1950</length>
	</data>
	<data type="text">
		<id>faq_parent_id</id>
		<title/>
	</data>
	<data type="text">
		<id>faq_parent_status</id>
		<title>Stav úlohy</title>
		<init>Nová úloha</init>
	</data>

	<!-- TRANSITIONS -->
	<transition>
		<id>2</id>
		<x>340</x>
		<y>100</y>
		<label>Vyplniť</label>
		<icon>input</icon>
		<roleRef>
			<id>admin</id>
			<logic>
				<perform>true</perform>
			</logic>
		</roleRef>
		<roleRef>
			<id>client</id>
			<logic>
				<perform>true</perform>
			</logic>
		</roleRef>
		<dataGroup>
			<id>form</id>
			<title>Vyplnenie formuláru</title>
			<layout>legacy</layout>
			<dataRef>
				<id>question_severity</id>
				<logic>
					<behavior>editable</behavior>
					<behavior>optional</behavior>
				</logic>
			</dataRef>
			<dataRef>
				<id>client_name</id>
				<logic>
					<behavior>editable</behavior>
				</logic>
				<layout>
					<x>0</x>
					<y>1</y>
					<rows>1</rows>
					<cols>2</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
			<dataRef>
				<id>client_surname</id>
				<logic>
					<behavior>editable</behavior>
				</logic>
				<layout>
					<x>0</x>
					<y>1</y>
					<rows>1</rows>
					<cols>2</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
			<dataRef>
				<id>client_email</id>
				<logic>
					<behavior>editable</behavior>
					<behavior>required</behavior>
				</logic>
				<layout>
					<x>0</x>
					<y>1</y>
					<rows>1</rows>
					<cols>2</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
			<dataRef>
				<id>question</id>
				<logic>
					<behavior>editable</behavior>
					<behavior>required</behavior>
				</logic>
				<layout>
					<x>0</x>
					<y>2</y>
					<rows>3</rows>
					<cols>3</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
		</dataGroup>
		<event type="finish">
			<actions phase="post">
				<!-- @formatter:off -->
				faq_parent_id: f.faq_parent_id;

				def petriNet = petriNetService.getAll().find { petriNet -> petriNet.title == "FAQ Process" }
				def caze = createCase(petriNet.identifier, "FAQ Question", "", userService.loggedOrSystem)

				String detailTaskId = findTask({ it.caseId.eq(useCase.stringId) &amp; it.transitionId.eq("4") })
				caze.dataSet['form_data'].value = Collections.singletonList(detailTaskId)
				caze.dataSet['channel'].value = "e-Form"
				workflowService.save(caze)

				change faq_parent_id value { return caze.stringId }
				<!-- @formatter:on -->
			</actions>
		</event>
	</transition>
	<transition>
		<id>4</id>
		<x>580</x>
		<y>100</y>
		<label>Detail</label>
		<icon>preview</icon>
		<dataGroup>
			<id>preview_group</id>
			<title>Feedback data</title>
			<layout>legacy</layout>
			<dataRef>
				<id>question_severity</id>
				<logic>
					<behavior>visible</behavior>
					<behavior>optional</behavior>
				</logic>
				<layout>
					<x>2</x>
					<y>1</y>
					<rows>1</rows>
					<cols>2</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
			<dataRef>
				<id>client_name</id>
				<logic>
					<behavior>visible</behavior>
					<behavior>optional</behavior>
				</logic>
				<layout>
					<x>0</x>
					<y>0</y>
					<rows>1</rows>
					<cols>2</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
			<dataRef>
				<id>client_surname</id>
				<logic>
					<behavior>visible</behavior>
					<behavior>optional</behavior>
				</logic>
				<layout>
					<x>2</x>
					<y>0</y>
					<rows>1</rows>
					<cols>2</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
			<dataRef>
				<id>client_email</id>
				<logic>
					<behavior>visible</behavior>
					<behavior>optional</behavior>
				</logic>
				<layout>
					<x>0</x>
					<y>1</y>
					<rows>1</rows>
					<cols>2</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
			<dataRef>
				<id>question</id>
				<logic>
					<behavior>visible</behavior>
					<behavior>optional</behavior>
				</logic>
				<layout>
					<x>0</x>
					<y>2</y>
					<rows>3</rows>
					<cols>3</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
		</dataGroup>
	</transition>
	<transition>
		<id>5</id>
		<x>460</x>
		<y>195</y>
		<label>Status tracker</label>
		<icon>info</icon>
		<dataGroup>
			<id>status_tracker_group</id>
			<title>Status tracker</title>
			<layout>legacy</layout>
			<dataRef>
				<id>faq_parent_status</id>
				<logic>
					<behavior>visible</behavior>
					<behavior>optional</behavior>
				</logic>
			</dataRef>
			<dataRef>
				<id>question_severity</id>
				<logic>
					<behavior>visible</behavior>
					<behavior>optional</behavior>
				</logic>
				<layout>
					<x>2</x>
					<y>1</y>
					<rows>1</rows>
					<cols>2</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
			<dataRef>
				<id>client_name</id>
				<logic>
					<behavior>visible</behavior>
					<behavior>optional</behavior>
				</logic>
				<layout>
					<x>0</x>
					<y>0</y>
					<rows>1</rows>
					<cols>2</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
			<dataRef>
				<id>client_surname</id>
				<logic>
					<behavior>visible</behavior>
					<behavior>optional</behavior>
				</logic>
				<layout>
					<x>2</x>
					<y>0</y>
					<rows>1</rows>
					<cols>2</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
			<dataRef>
				<id>client_email</id>
				<logic>
					<behavior>visible</behavior>
					<behavior>optional</behavior>
				</logic>
				<layout>
					<x>0</x>
					<y>1</y>
					<rows>1</rows>
					<cols>2</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
			<dataRef>
				<id>question</id>
				<logic>
					<behavior>visible</behavior>
					<behavior>optional</behavior>
				</logic>
				<layout>
					<x>0</x>
					<y>2</y>
					<rows>3</rows>
					<cols>3</cols>
					<offset>0</offset>
					<template>material</template>
					<appearance>outline</appearance>
				</layout>
			</dataRef>
		</dataGroup>
	</transition>

	<!-- PLACES -->
	<place>
		<id>1</id>
		<x>220</x>
		<y>100</y>
		<label>init</label>
		<tokens>1</tokens>
		<static>false</static>
	</place>
	<place>
		<id>3</id>
		<x>460</x>
		<y>100</y>
		<label>Vyplnený</label>
		<tokens>0</tokens>
		<static>false</static>
	</place>

	<!-- ARCS -->
	<arc>
		<id>6</id>
		<type>regular</type>
		<sourceId>1</sourceId>
		<destinationId>2</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>7</id>
		<type>regular</type>
		<sourceId>2</sourceId>
		<destinationId>3</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>8</id>
		<type>read</type>
		<sourceId>3</sourceId>
		<destinationId>4</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>9</id>
		<type>read</type>
		<sourceId>3</sourceId>
		<destinationId>5</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
</document>
